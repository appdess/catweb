apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- deployment.yaml
- service.yaml
- catweb-ingress.yaml

patchesStrategicMerge:
- image-pull-secrets-patch.yaml

patches:
- ingress-host-patch.yaml

images:
- name: registry.gitlab.com/adess-demos/demo/app-team/catweb-gitops
  newName: registry.gitlab.com/adess-demos/demo/app-team/catweb-gitops:registry.gitlab.com/adess-demos/demo/app-team/catweb-gitops/main
  newTag: fd2024ad2a8e687906d29477c1cc7edf8f7fbbad

# namespace: review-${CI_COMMIT_REF_SLUG} # override the namespace for review deployment
